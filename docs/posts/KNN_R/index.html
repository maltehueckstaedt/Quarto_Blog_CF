<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Malte Hückstädt">
<meta name="dcterms.date" content="2023-10-09">

<title>Quarto - K-Nearest Neighbors with R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-RPNCKESW8M"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-RPNCKESW8M', { 'anonymize_ip': true});
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
<link rel="stylesheet" href="academicons.css">
<meta property="og:title" content="Quarto - K-Nearest Neighbors with R">
<meta property="og:description" content="">
<meta property="og:image" content="https://maltehueckstaedt.github.io/Quarto_Blog_CF/posts/KNN_R/index_files/figure-html/unnamed-chunk-3-1.png">
<meta property="og:site-name" content="Quarto">
<meta property="og:image:height" content="960">
<meta property="og:image:width" content="1344">
<meta name="twitter:title" content="Quarto - K-Nearest Neighbors with R">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://maltehueckstaedt.github.io/Quarto_Blog_CF/posts/KNN_R/index_files/figure-html/unnamed-chunk-3-1.png">
<meta name="twitter:image-height" content="960">
<meta name="twitter:image-width" content="1344">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../quarto.png" alt="Quarto logo." class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../recent.html" rel="" target="">
 <span class="menu-text">Recent articles</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../software.html" rel="" target="">
 <span class="menu-text">Software</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://maltehueckstaedt.github.io/Quarto_Blog_CF/" rel="" target="">
 <span class="menu-text">|</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../skills.html" rel="" target="">
 <span class="menu-text">Skills</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../acomplishments.html" rel="" target="">
 <span class="menu-text">Acomplishments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../experience.html" rel="" target="">
 <span class="menu-text">Experience</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../talks.html" rel="" target="">
 <span class="menu-text">Talks</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://twitter.com/chernofffaces" rel="" target="">
 <span class="menu-text"> X</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/MalteHueckstaedt?tab=repositories" rel="" target="">
 <span class="menu-text"> GH</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://orcid.org/0000-0002-0185-4230" rel="" target="">
 <span class="menu-text"> ORCID</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://scholar.google.com/citations?hl=en&amp;user=EJTHqH4AAAAJ" rel="" target="">
 <span class="menu-text"> GS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.researchgate.net/profile/Malte-Hueckstaedt" rel="" target="">
 <span class="menu-text"> RS</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://de.linkedin.com/in/malte-hückstädt-82aa78208" rel="" target="">
 <span class="menu-text"> LI</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">K-Nearest Neighbors with R</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">Classification</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Malte Hückstädt </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 9, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a>
  <ul class="collapse">
  <li><a href="#recoding" id="toc-recoding" class="nav-link" data-scroll-target="#recoding">Recoding</a></li>
  <li><a href="#data-selection" id="toc-data-selection" class="nav-link" data-scroll-target="#data-selection">Data Selection</a>
  <ul class="collapse">
  <li><a href="#disciplinary-heterogeneity" id="toc-disciplinary-heterogeneity" class="nav-link" data-scroll-target="#disciplinary-heterogeneity">Disciplinary heterogeneity</a></li>
  <li><a href="#number-of-members" id="toc-number-of-members" class="nav-link" data-scroll-target="#number-of-members">Number of members</a></li>
  <li><a href="#frictions" id="toc-frictions" class="nav-link" data-scroll-target="#frictions">Frictions</a></li>
  </ul></li>
  <li><a href="#recoding-inputvariables" id="toc-recoding-inputvariables" class="nav-link" data-scroll-target="#recoding-inputvariables">Recoding Inputvariables</a></li>
  </ul></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/maltehueckstaedt/Quarto_Blog_CF/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>K-Nearest Neighbours (K-NN) <span class="citation" data-cites="kramerKNearestNeighbors2013">(<a href="#ref-kramerKNearestNeighbors2013" role="doc-biblioref">Kramer 2013</a>)</span> is a widely used algorithm in the field of machine learning and data analysis. It is often used for tasks such as classification and regression. The basic approach of the K-NN algorithm is to identify the <span class="math inline">\(K\)</span> <em>nearest neighbours</em> of a given data point in a dataset and make a prediction for the given point based on the classifications or values of these neighbours.</p>
<p>Here is a basic description of the K-NN algorithm:</p>
<p>Dataset: First, a dataset is required, which consists of a collection of data points. Each data point has features that define its position in a geometric space.</p>
<ol type="1">
<li><p><strong>Distance calculation:</strong> To find the nearest neighbours for a given data point, a distance metric is used, often the Euclidean distance. This metric measures the distance between the feature vectors of the data points.</p></li>
<li><p><strong>Selection of K:</strong> The user must specify a number K, which indicates how many nearest neighbours should be considered. K is a positive integer.</p></li>
<li><p><strong>Identification of K nearest neighbours:</strong> For a given data point, the K data points are selected from the data set that have the shortest distance to the given point.</p></li>
<li><p><strong>Prediction:</strong> In a classification task, the class membership of the data point is predicted based on the majority of the K nearest neighbours. This means that the class that occurs most frequently in the K nearest neighbours is selected. In a regression task, the value of the data point is estimated based on the average or weighted averages of the K nearest neighbours.</p></li>
<li><p><strong>Evaluation and fitting:</strong> The algorithm can be applied to test data to evaluate its performance. Choosing the right K value can have a significant impact on the results, so it is important to choose K carefully.</p></li>
</ol>
<p>K-NN is a simple, non-parametric algorithm that does not require explicit model fitting. However, it is sensitive to the choice of K and can be computationally expensive in large datasets or with many features. Nevertheless, it is a useful algorithm for various use cases, especially when the data distribution is non-linear or complex.</p>
<p>In order to apply the K-NN method in an exemplary way, the following question will be examined to find out which influences lead to research teams creating a climate of cooperation characterised by trust to the highest degree. This is a relevant question because it has been repeatedly shown that a climate of cooperation characterised by trust is an important factor for the success of research teams <span class="citation" data-cites="hückstädt2023">(e.g. <a href="#ref-hückstädt2023" role="doc-biblioref">Hückstädt 2023</a>)</span>.</p>
</section>
<section id="data" class="level1">
<h1>Data</h1>
<p>In the following, the KNN method is tested with cross-sectional data from a large-scale web survey conducted in 2020 as part of the joint project <em>Determinants and Effects of Cooperation in Homogeneous and Heterogeneous Research Clusters</em> (DEKiF) <span class="citation" data-cites="kleimannQuantitativePartialSurvey2023">(<a href="#ref-kleimannQuantitativePartialSurvey2023" role="doc-biblioref">Hückstädt et al. 2023</a>)</span>. The survey focused on the internal cooperation processes of research clusters, on cooperation problems that arise in the course of joint work, and on possible solutions to internal cooperation problems. The target population of the survey was N = 15,595 PIs and spokespersons who have participated in Research Clusters (RC) funded by the German Research Foundation since 2015. The target population included disciplinary and interdisciplinary, large and small (in terms of staff), disciplinary homo- and heterogeneous as well as multi-local RC. The database <a href="https://gepris.dfg.de/gepris/OCTOPUS">GEPRIS</a>, which contains information on projects (and project members) funded by the German Research Foundation (DFG), was used to determine the population as well as to collect contact information.</p>
<p>The sample collected consisted of <span class="math inline">\(n = 5306\)</span> participants from <span class="math inline">\(n = 948\)</span> RC, of which <span class="math inline">\(n = 4971\)</span> were PIs and <span class="math inline">\(n = 335\)</span> were speakers. This corresponds to a response rate of 34 per cent. The sample consisted of 26 per cent female and 74 per cent male participants. The average age of the respondents was <span class="math inline">\(x = 52.67\)</span> years with a standard deviation of <span class="math inline">\(SD = 9.52\)</span>.</p>
<section id="recoding" class="level2">
<h2 class="anchored" data-anchor-id="recoding">Recoding</h2>
<p>We load the DEKiF-data into the workspace and recode the Trust-Variable (<code>problm_9</code>).<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> We code as <code>high trust</code> those cases that indicate that the collaboration within their research team is characterised by trust to a high extent, and as <code>no high trust</code> those cases where this is not the case.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">"/Volumes/MALTE_USB/dekif_df.rds"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">trust=</span><span class="fu">case_when</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  problm_9<span class="sc">&lt;</span><span class="dv">5</span> <span class="sc">~</span> <span class="st">"no high trust"</span>,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  problm_9<span class="sc">==</span><span class="dv">5</span> <span class="sc">~</span> <span class="st">"high trust"</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">trust=</span><span class="fu">as.factor</span>(trust))</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(df<span class="sc">$</span>trust)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   high trust no high trust 
         1590          2022 </code></pre>
</div>
</div>
</section>
<section id="data-selection" class="level2">
<h2 class="anchored" data-anchor-id="data-selection">Data Selection</h2>
<p>As can be seen, in terms of internal trust relationships, DFG teams’ cooperation is similarly often perceived as being characterised by trust to the highest degree as not or less trusting.</p>
<p>Which variables could be responsible for the fact that the cooperation climate is not always perceived as trustworthy to the highest degree?<br>
</p>
<section id="disciplinary-heterogeneity" class="level3">
<h3 class="anchored" data-anchor-id="disciplinary-heterogeneity">Disciplinary heterogeneity</h3>
<ol type="1">
<li><p><strong>Communication barriers:</strong> Different disciplines have different disciplinary cultures. If team members have difficulty communicating in an understandable way, this can affect trust as misunderstandings and miscommunication can occur.</p></li>
<li><p><strong>Differences in working methods:</strong> Team members from different disciplines may have different ways of working and methods. This can lead to conflict and reduce trust if team members have doubts about the effectiveness or quality of others’ work.</p></li>
<li><p><strong>Prejudices and stereotypes:</strong> In interdisciplinary teams, prejudices and stereotypes about certain disciplines might occur, which can affect the trust of team members. If members of a discipline are mistakenly seen as less competent, this can reduce confidence in their abilities <span class="citation" data-cites="shrumTrustConflictPerformance2001 hückstädt2023">(<a href="#ref-shrumTrustConflictPerformance2001" role="doc-biblioref">Shrum, Chompalov, and Genuth 2001</a>; <a href="#ref-hückstädt2023" role="doc-biblioref">Hückstädt 2023</a>)</span>.</p></li>
</ol>
</section>
<section id="number-of-members" class="level3">
<h3 class="anchored" data-anchor-id="number-of-members">Number of members</h3>
<ol type="1">
<li><p><strong>Coordination and decision-making:</strong> As the number of team members in a team increases, coordination and decision-making can become increasingly complex. Each member may have different ideas, priorities and ways of working, which can lead to conflicts or delays, which in turn reduce the trust relationships among members.</p></li>
<li><p><strong>Responsibilities:</strong> Each member has responsibility for certain aspects of the project. However, if the number of members in a team is too high, it can be difficult to establish clear responsibilities and ensure that each team member is performing their tasks effectively. Diffusion of responsibility can induce free-rider behaviour, which can also negatively affect trust relationships between members.</p></li>
<li><p><strong>Resource allocation:</strong> The number of members can also influence the allocation of resources such as research funds, laboratory resources and research staff. If there are too many members, the limited resources risk being shared inefficiently, which can lead to friction and eventually to a loss of trust <span class="citation" data-cites="defila2006">(<a href="#ref-defila2006" role="doc-biblioref">Defila, Di Giulio, and Scheuermann 2006</a>)</span>.</p></li>
</ol>
</section>
<section id="frictions" class="level3">
<h3 class="anchored" data-anchor-id="frictions">Frictions</h3>
<p>Decisions regarding the distribution of resources or content can lead to conflicts, for example if they are not reached on the basis of consensus. The tensions resulting from unacceptable decisions can lead to a loss of trust in the team if some members are overreached in the allocation of resources without comprehensible justification.</p>
<p>To specify the aforementioned input variables in the context of the K-NN, we use the <code>select()</code> function to select the dichothomised trust variable coded above, as well as the number of subjects in a research team, the number of researchers in a research team, the extent of conflicts arising in the context of resource allocation or content-related decisions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df_knn <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">select</span>(trust,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                        n_fachl_zuord,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                        n_PIs,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                        entsch_inhlt_knflkt,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                        entsch_ressrc_knflkt) <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>()</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">kbl</span>(<span class="fu">head</span>(df_knn),<span class="at">format =</span> <span class="st">"markdown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 18%">
<col style="width: 18%">
<col style="width: 8%">
<col style="width: 26%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">trust</th>
<th style="text-align: right;">n_fachl_zuord</th>
<th style="text-align: right;">n_PIs</th>
<th style="text-align: right;">entsch_inhlt_knflkt</th>
<th style="text-align: right;">entsch_ressrc_knflkt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">high trust</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">no high trust</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">37</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">no high trust</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">no high trust</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">high trust</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">no high trust</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">2</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="recoding-inputvariables" class="level2">
<h2 class="anchored" data-anchor-id="recoding-inputvariables">Recoding Inputvariables</h2>
<p>Since K-NN is a distance-based algorithm, the results are affected by the scaling of the input variables. To avoid this, we scale our data in the following and look at the distributions of the input variables using the <code>ggpplot()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>df_knn <span class="ot">&lt;-</span> df_knn <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(is.numeric, scale)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>df_knn <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gather</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>value)) <span class="sc">+</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y=</span>..density..), <span class="at">colour=</span><span class="st">"black"</span>, <span class="at">fill=</span><span class="st">"blue"</span>,<span class="at">binwidth =</span> <span class="fl">1.5</span>, <span class="at">alpha=</span>.<span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha=</span>.<span class="dv">2</span>, <span class="at">fill=</span><span class="st">"green"</span>, <span class="at">adjust =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>key, <span class="at">scales =</span> <span class="st">"free"</span>)<span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Value"</span>, <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="st">"Histograms and Density Plots of Numerical Variables"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="analysis" class="level1">
<h1>Analysis</h1>
<p>We import the <code>caret</code> package and set the seed for reproducibility. The trust variable is used as a stratification variable, which means that the proportion of “high trust” and “no high trust” in the variable is kept constant in both the training and the test data set. The argument <code>times</code> is set to <code>1</code>, which means that the function creates only one partition. The argument <code>p</code> is set to <code>0.8</code> so that 80% of the data is used for training the K-NN and 20% for testing the model. Finally, the argument <code>list</code> is set to <code>FALSE</code> so that the function returns a vector of indices rather than a list of data frames.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>trainIndex <span class="ot">&lt;-</span> <span class="fu">createDataPartition</span>(df_knn<span class="sc">$</span>trust, </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">times=</span><span class="dv">1</span>, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">p =</span> .<span class="dv">8</span>, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">list =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> df_knn[trainIndex, ]</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> df_knn[<span class="sc">-</span>trainIndex, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Im folgenden trainieren wir ein K-NN-Modell unter Verwendung der <code>train()</code>-Funktion des <code>caret</code>-Pakets. Die Funktion <code>train()</code> nimmt verschiedene Argumente entgegen:</p>
<ul>
<li><code>trust ~ .</code> specifies <code>trust</code> as output variable, <code>.</code> all other variables in the data set as input variables.</li>
<li>the <code>train</code> data set is specified as the data basis.</li>
<li>as the applied estimation method, the KNN we focused on.</li>
</ul>
<p>During training, 10-fold cross-validation is used to evaluate the performance of the model. Finally, different values of the tuning parameter ‘k’ are tested, namely 3, 5,7 and 9 as specified by ‘tuneGrid = data.frame(k = c(3,5,7,9))’. The resulting model is stored in an object called ‘knnModel’ and can now be used for further analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>knnModel <span class="ot">&lt;-</span> <span class="fu">train</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>             trust <span class="sc">~</span> ., </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> train, </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"knn"</span>, </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">trControl =</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"cv"</span>), </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">tuneGrid =</span> <span class="fu">data.frame</span>(<span class="at">k =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>            )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Having found the best value of “K”, we now train the final KNN classification model training dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>best_model<span class="ot">&lt;-</span> <span class="fu">knn3</span>(</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>                  trust <span class="sc">~</span> .,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">data =</span> train,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">k =</span> knnModel<span class="sc">$</span>bestTune<span class="sc">$</span>k</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                 )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The Caret package provides some straightforward and powerful method for assessing models. To calculate the assessment metrics of model performance, it is first important to generate predictions for the trust variable of the test data set. We then use these predictions and the actual values to evaluate the model performance.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>predictions <span class="ot">&lt;-</span> <span class="fu">predict</span>(best_model, test,<span class="at">type =</span> <span class="st">"class"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate confusion matrix</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>cm <span class="ot">&lt;-</span> <span class="fu">confusionMatrix</span>(predictions, test<span class="sc">$</span>trust)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>cm</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Confusion Matrix and Statistics

               Reference
Prediction      high trust no high trust
  high trust           146           109
  no high trust        140           232
                                          
               Accuracy : 0.6029          
                 95% CI : (0.5634, 0.6414)
    No Information Rate : 0.5439          
    P-Value [Acc &gt; NIR] : 0.001649        
                                          
                  Kappa : 0.1925          
                                          
 Mcnemar's Test P-Value : 0.057279        
                                          
            Sensitivity : 0.5105          
            Specificity : 0.6804          
         Pos Pred Value : 0.5725          
         Neg Pred Value : 0.6237          
             Prevalence : 0.4561          
         Detection Rate : 0.2329          
   Detection Prevalence : 0.4067          
      Balanced Accuracy : 0.5954          
                                          
       'Positive' Class : high trust      
                                          </code></pre>
</div>
</div>
<p>The <code>confusionMatrix()</code> function gives us some important parameters that allow us to evaluate the performance of our model:</p>
<ol type="1">
<li><p>Accuracy: The accuracy of the model is <code>.6061</code>, which means that it made 60.61% of the predictions correctly. This is a reasonable performance, which is significantly higher than estimates that would be based on the “No Information Rate”.</p></li>
<li><p>Kappa: The kappa value is <code>.199</code>. Kappa is a measure of the agreement between the model’s predictions and the actual values. A high Kappa value close to 1 indicates good predictive performance, a low Kappa value close to 0 indicates poor predictive performance. In this case, our K-NN model can be addressed as poor.</p></li>
<li><p>Sensitivity: The sensitivity of the K-NN is 0.5140. The model is therefore able to correctly predict about 51% of the “high trust” cases.</p></li>
<li><p>Specificity: The specificity is 0.6833 and further shows that the model correctly predicts approx. 68% of the “no high trust” cases.</p></li>
</ol>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>The specified model has comparatively good classification strength, but is only slightly better than random in terms of prediction. In summary, therefore, the K-NN model has some predictive power, but there is room for improvement. More imput variables should be specified and different K values tested to see if a different choice of K leads to better performance.</p>
</section>
<section id="references" class="level1">




</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-defila2006" class="csl-entry" role="listitem">
Defila, Rico, Antonietta Di Giulio, and Michael Scheuermann. 2006. <em>Forschungsverbundmanagement: Handbuch für die Gestaltung inter- und transdisziplinärer Projekte</em>. Zürich: vdf Hochschulverlag.
</div>
<div id="ref-hückstädt2023" class="csl-entry" role="listitem">
Hückstädt, Malte. 2023. <span>“Ten Reasons Why Research Collaborations Succeed<span></span>a Random Forest Approach.”</span> <em>Scientometrics</em> 128 (3): 1923–50. <a href="https://doi.org/10.1007/s11192-022-04629-7">https://doi.org/10.1007/s11192-022-04629-7</a>.
</div>
<div id="ref-kleimannQuantitativePartialSurvey2023" class="csl-entry" role="listitem">
Hückstädt, Malte, Bernd Kleimann, Monika Jungbauer-Gans, and Deutsches Zentrum Für Hochschul- Und Wissenschaftsforschung (DZHW). 2023. <span>“Quantitative <span>Partial Survey</span> of the <span>Project</span> <span>DEKiF</span>.”</span> <span>German Centre for Higher Education Research and Science Studies (DZHW)</span>. <a href="https://doi.org/10.21249/DZHW:DECQUANT:1.0.0">https://doi.org/10.21249/DZHW:DECQUANT:1.0.0</a>.
</div>
<div id="ref-kramerKNearestNeighbors2013" class="csl-entry" role="listitem">
Kramer, Oliver. 2013. <span>“K-<span>Nearest Neighbors</span>.”</span> In <em>Dimensionality <span>Reduction</span> with <span>Unsupervised Nearest Neighbors</span></em>, edited by Oliver Kramer, 13–23. <span>Berlin, Heidelberg</span>: <span>Springer</span>. <a href="https://doi.org/10.1007/978-3-642-38652-7_2">https://doi.org/10.1007/978-3-642-38652-7_2</a>.
</div>
<div id="ref-shrumTrustConflictPerformance2001" class="csl-entry" role="listitem">
Shrum, Wesley, Ivan Chompalov, and Joel Genuth. 2001. <span>“Trust, Conflict and Performance in Scientific Collaborations.”</span> <em>Social Studies of Science</em> 31 (5): 681730.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>See for an overview of the measuring instruments: https://metadata.fdz.dzhw.eu/public/files/instruments/ins-decquant-ins1$-1.0.0/attachments/Codebuch_Questionnaire_Final.EN.pdf<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="maltehueckstaedt/blogComments" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Supported by <a href="https://posit.co"><img src="https://www.rstudio.com/assets/img/posit-logo-fullcolor-TM.svg" class="img-fluid" alt="Posit" width="65"></a></div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="../../index.html">About</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../faq.html">FAQ</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../license.html">License</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="../../imprint.html">Imprint</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>